<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
 <head>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css" integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu" crossorigin="anonymous">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather">
  <link href="/styles/1207b02cb143/styles.css" rel="stylesheet">
  <title>Using Emacs for R | Teoten's blog</title>
  <meta name="description" content="Emacs is an easy to use text editor that, combined with ESS can make a powerful IDE for working with R">
  <link rel="canonical" href="https://blog.teoten.com/posts/2022/use_emacs_for_r/">
  <script type="application/ld+json">{"description":"Emacs is an easy to use text editor that, combined with ESS can make a powerful IDE for working with R","headline":"Using Emacs for R","@context":"https://schema.org","publisher":{"@type":"Person","name":"teoten"},"articleSection":"Programming","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.teoten.com/posts/2022/use_emacs_for_r/"},"datePublished":"2022-12-29T08:00:00+01:00","keywords":"R basics, emacs","author":{"@type":"Person","name":"Manuel Teodoro Tenango","url":"https://resume.teoten.com/","sameAs":["https://social.linux.pizza/@teoten","https://www.youtube.com/@teoten.programando"]},"dateModified":"2022-12-29T08:00:00+01:00","inLanguage":"en","image":"https://blog.teoten.com/post/2022/use_emacs_for_r/learning-editors.jpg","isPartOf":{"@type":"Blog","name":"Teoten's Blog","url":"https://blog.teoten.com"},"@type":"BlogPosting","about":[{"name":"R","@type":"Thing"},{"name":"emacs","@type":"Thing"}]}</script>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Teoten">
 </head>
 <body>
  <!-- Top nav bar -->
  <div>
   <!-- Toggle Button -->
   <button id="theme-toggle-btn" onclick="toggleTheme()"><i class="fas fa-sun"></i></button>
   <div id="wrapper">
    <nav id="navbar" class="navbar">
     <div class="navbar-container">
      <input type="checkbox" name="" id="">
      <div class="hamburger-lines">
       <span class="line line1"></span> <span class="line line2"></span> <span class="line line3"></span>
      </div>
      <ul class="menu-items">
       <li><a href="https://blog.teoten.com/">Home</a></li>
       <li><a href="https://blog.teoten.com/list/">Posts</a></li>
       <li><a href="https://blog.teoten.com/categories/">Categories</a></li>
       <li><a href="https://blog.teoten.com/tags/">Tags</a></li>
       <li><a href="https://blog.teoten.com/about/">About</a></li>
      </ul>
     </div>
    </nav>
   </div>
  </div>
  <div id="shadow-block">
   <div id="container">
    <div id="wide-content">
     <!-- Main content -->
     <div class="article-top">
      <img src="https://blog.teoten.com/post/2022/use_emacs_for_r/learning-editors.jpg" class="article-top-image" alt="Using Emacs for R">
      <div class="article-title-container">
       <h1 class="article-title">Using Emacs for R</h1>
      </div>
      <div class="article-meta">
       <span> <i class="fa fa-calendar"> 2022-12-29</i> </span>
      </div>
     </div>
     <article id="post-/posts/2022/use_emacs_for_r/" data-post-id="/posts/2022/use_emacs_for_r/">
      <div>
       <h2 class="article-header">Easy Emacs</h2>
       <p>To start using R, or almost anything else in <a href="https://www.gnu.org/software/emacs/">Emacs</a> you basically need to know 3 things: 1) How to move in Emacs, meaning understanding what is what and learning a few key commands; 2) What is the configuration file and how to use it and 3) How to use packages to extend Emacs. In the first half of this post I will try to show how easy it is to cover these 3 points even for people who are inexperienced in programming. If you don't believe me I invite you to read just the first paragraph of the next section to give you an idea of how easy it really is. During the second half I will show how I'm using R in Emacs to give you a starting point of a fully functional environment for R, and will conclude with some topics that can be further explored.</p>
       <h2 class="article-header">Why did I chose Emacs as a researcher in the academia?</h2>
       <p>I started my professional life as a researcher in ecology-related topics. During my master studies I improved my knowledge on statistics considerably and due to that and to the complexity of my research project, I did not want to use a GUI-based software for my statistical analysis. Thus, I started learning R, and believe it or not, I completed my research project for my Thesis by tipping R code directly to the console from my handwritten notes. When I started my PhD I thought that it would be easier to just write the code I need in electronic format and copy-paste it to the R console. And with that idea in mind and the help of the internet, I discovered the text editors and Emacs, and a whole new universe opened up to me. I know that many in my position would be ashamed of sharing such a story but I simply want to exemplify how easy it is to start using Emacs, contrary to the popular belief. I went from having no idea of what a text editor is, to setting up and using Emacs with R, with no intermediate steps.</p>
       <p>Emacs is a wonderful text editor that can easily be extended to do many things. You can have tools to help in writing your code such as different types of indentation, syntax highlighter, git utilities, project management, code maps, web browser, even to play games. Emacs provides by default a lot of functionalities to move easily through the text files, including keybindings to go to the end and beginning of buffer, function or paragraph, parentheses matching, text search, exploration and replacement, syntax and spelling checks. You can create markers to move quickly to particular files, window configurations or to store text and numbers. Some consider Emacs almost as an OS because you can also do things like create and delete files, version control, internet browser, and more.</p>
       <p>The reason why I stayed with Emacs as a researcher in the academia was mainly due to <a href="https://orgmode.org/">org-mode</a>. It is an Emacs major mode that helped me to organize my research and still today it helps me to organize my job. You can think if it as the Emacs version of Markdown, with the possibility to organize to-do lists, tag notes and sections, fully organize an agenda (tracking tasks, set deadlines, schedule items, etc.). You can add chunks of code from almost any language and, with the help of a couple more libraries, you can run the code within the org file itself. Github and other git servers have integrated tools to view org files as html, but there are libraries to convert them also to pdf, libreoffice, create presentations and more.</p>
       <p>Another important point that made me fall in love with Emacs was the fact that, if I managed to keep most of my research files as text I could do it all from Emacs, instead of using different apps for different tasks. And so I did: I was writing my papers in LaTeX and organizing my bibliography with bibtex; I was saving data as CSV which Emacs can manage very well; the graphics were more of an issue but, since I used R to create most of them, I simply needed to save the right script for the right plot. And all this was organized in org-mode with links to this or that file according to the project, section, tag, etc. And the reason why I wanted to do this was not even for organization purposes, but rather because, as text, I could track all my changes using Git, which ended up being a huge support for my PhD work: I could revert changes if I had mistakes or explore old commits, and backup all of that easily. So, at the end, while R had been the reason why I decided to explore Emacs, it was in fact the combo Emacs + org-mode + git which improved my organization and productivity potentially during my research life. And I would like to share this tools with as many people as possible.</p>
       <p></p>
       <div class="article-image-container">
        <a href="https://blog.teoten.com/post/2022/use_emacs_for_r/learning-editors.jpg"><img alt="Editors learning curve" src="https://blog.teoten.com/post/2022/use_emacs_for_r/learning-editors.jpg"></a>
       </div>
       <p></p>
       <p>Thus, I decided to create this post, to give you an idea of how easily you can start using Emacs for R coding. If you enjoy it and you'd like me to create more content about some of the tools briefly described here, make sure to leave me a comment and I'll take care of it. I include a general list of the tools I use regularly in Emacs at the end, you can have a look there.</p>
       <h2 class="article-header">Quick start</h2>
       <p>Although Emacs is extremely customizable, it is true that it requires some coding skills and knowledge of the not so popular programming language called <a href="https://www.gnu.org/software/emacs/manual/html_node/eintr/">Emacs Lisp</a>. You would probably have also read that Emacs has a very steep learning curve, which is also true. This two conditions usually scare people away from learning Emacs. In this section I will demonstrate that you don't need to know Emacs Lisp (or programming at all) and that with very little knowledge of Emacs you can have a ready-to-use super-powerful R editor.</p>
       <p>This chapter is a brief overview of the rest of the post meant as a quick start to get Emacs up and working with R in just as few as 10 steps. The rest of the post will simply go deeper into each of the steps.</p>
       <ol>
        <li>Make sure that you have installed both, Emacs and R in your computer.</li>
        <li>Open Emacs and press the keys Ctr + x, release and press Ctr + f (in Emacs notation, this combination of keys is expressed as "<strong>C-x C-f</strong>"). Focus on the <strong>mini buffer</strong>, it is the line positioned at the bottom of your window. It is waiting for you to type something. If there is some path to a folder already in that area delete it first and then type <code>~/.emacs</code> and enter. It should open a new empty window.</li>
       </ol>
       <p></p>
       <div class="article-image-container">
        <a href="https://blog.teoten.com/post/2022/use_emacs_for_r/emacs-minibuffer.png"><img alt="Emacs minibuffer" src="https://blog.teoten.com/post/2022/use_emacs_for_r/emacs-minibuffer.png"></a>
       </div>
       <p></p>
       <ol>
        <li>This is your configuration file. Paste the following code in your new window 
         <pre><code class="highlight"><span></span><span class="p">(</span><span class="nb">require</span> <span class="ss">'package</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">'package-archives</span> <span class="o">'</span><span class="p">(</span><span class="s">"melpa"</span> <span class="o">.</span> <span class="s">"https://melpa.org/packages/"</span><span class="p">))</span>

<span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nv">package-installed-p</span> <span class="ss">'use-package</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">package-refresh-contents</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">package-install</span> <span class="ss">'use-package</span><span class="p">))</span>
<span class="p">(</span><span class="k">setq</span> <span class="nv">use-package-always-ensure</span> <span class="no">t</span><span class="p">)</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">ess</span><span class="p">)</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">company</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">'after-init-hook</span> <span class="ss">'global-company-mode</span><span class="p">))</span>

<span class="p">(</span><span class="k">setq</span> <span class="nv">company-selection-wrap-around</span> <span class="no">t</span>
      <span class="nv">company-tooltip-align-annotations</span> <span class="no">t</span>
      <span class="nv">company-idle-delay</span> <span class="mf">0.45</span>
      <span class="nv">company-minimum-prefix-length</span> <span class="mi">3</span>
      <span class="nv">company-tooltip-limit</span> <span class="mi">10</span><span class="p">)</span>
</code></pre></li>
       </ol>
       <p>This configuration assumes that you have installed R with all the defaults. If you have installed R in a directory of your choice, add the following line at the end of the configuration file, changing the path of my example for the path were you have installed R.</p>
       <pre><code class="highlight"><span></span><span class="p">(</span><span class="k">setq</span> <span class="nv">inferior-ess-r-program</span> <span class="s">"C:/Users/Manuel/path_where_R_is/R-4.2.1/bin/R.exe"</span><span class="p">)</span>
</code></pre>
       <ol>
        <li>Type <strong>C-x C-s</strong> (meaning, Ctr + x, release, Ctr + s). This will save the file.</li>
        <li>Type now Alt + x (in Mac <em>command</em> key instead of Alt or, if it does not work, the <em>option</em> key instead), this is the key Meta, represented in Emacs by <strong>M-x</strong>. At this point you want to focus again on your mini buffer, the line at the bottom of the screen.</li>
        <li>Type there <code>package-install</code> enter and then type <code>use-package</code>, enter. If some text appears at the bottom of your <code>.emacs</code> file don't worry, it is intended this way.</li>
        <li>Focus on the mini buffer in case it prompts something. If it asks you if you want to install the package type <code>y</code> and enter. If it tells you that it cannot find the package or it does not exist, close Emacs, open it again and repeat steps 5 and 6. It should show a message informing that it has been installed. In my case it shows the following line in the minibuffer:</li>
       </ol>
       <pre><code class="highlight"></code></pre>
       <ol>
        <li>Now close Emacs and open it again. This time it should take longer to load. Be patient, Emacs is loading installing and loading more packages for you.</li>
        <li>Type again <strong>C-x C-f</strong> and type <code>test.R</code>, enter. You can change the path before the file if you wish (i.e. <code>~/Code/test.R</code>).</li>
        <li>A new empty area should appear. Type there one line of R code. When you are done, while keeping the cursor in the line where your code is, press <strong>C-c C-j</strong>, this sends a line to R. A new area will open, showing the R console and the results of the code you just sent. If nothing happens focus on the minibuffer, it might ask you where to start your R session; you can just press enter or provide a new location. Then you can continue typing R code and use the same combination of keys to run a line, you can use <strong>C-c C-p</strong> to run a paragraph, <strong>C-c C-f</strong> to send a function and <strong>C-c C-b</strong> the send the whole buffer (which here basically means the whole file) or simply Control + enter (<strong>C-return</strong>) to send any of the mentioned regions. And as you already know, you can save the file by pressing <strong>C-x C-s</strong>.</li>
       </ol>
       <p></p>
       <div class="article-image-container">
        <a href="https://blog.teoten.com/post/2022/use_emacs_for_r/emacs-r-init.png"><img alt="ESS and R" src="https://blog.teoten.com/post/2022/use_emacs_for_r/emacs-r-init.png"></a>
       </div>
       <p></p>
       <p>If everything went well now you should have a simple Emacs configuration to start coding in R. Congratulations!.</p>
       <h2 class="article-header">Getting started with Emacs</h2>
       <h3 class="article-header">Installation and first steps</h3>
       <p>Both, R and Emacs are extremely easy to install, therefore I will not go into the details for it. Basically in any Linux distribution you can just use your package manager for it, in windows just download and run the official executable files and for Mac you can also download the binaries or use alternative package methods like homebrew (also applicable for Linux). For R go to (https://www.r-project.org/) and for Emacs to (https://www.gnu.org/software/emacs/).</p>
       <p>Once you have installed Emacs you can run it and you will have the welcome screen, together with some toolbars and list of menus. At this point you could basically use Emacs like any other text editor: you can open files, edit them and save them by using all the menus, icons and your mouse. However, the real power of Emacs rest in its keybindings. To get started I recommend to click on the link <strong>Emacs Tutorial</strong> of the welcome screen, it will guide you through the basics. After the tutorial you will feel more comfortable finding your way around Emacs and the rest of this post will be easier to follow.</p>
       <p></p>
       <div class="article-image-container">
        <a href="https://blog.teoten.com/post/2022/use_emacs_for_r/emacs-init.png"><img alt="Welcome to Emacs" src="https://blog.teoten.com/post/2022/use_emacs_for_r/emacs-init.png"></a>
       </div>
       <p></p>
       <h3 class="article-header">Control, Meta and the minibuffer, moving in Emacs</h3>
       <p>When you are working with text most of the time (as it is the case of R code) the use of the mouse can reduce productivity by searching with your eyes the exact places you want to mark, going all the way to the menu to save or open a file, finding when a parentheses opens and closes, and so on. The idea of the keybindings is to increase productivity by staying in the text at the level of the keyboard most of the time, since this is what we actually do when we write code.</p>
       <p>At the beginning it can be complicated to memorize so many keybindings. I'd recommend to try to remember the most basic ones to move along the text, save files, close Emacs and split the screen as you need to. The rest can be easily achieved through the mouse icons and menus. When I started using Emacs I was having a piece of paper with the most useful keybindings and, as my fingers started remembering by themselves I was deleting those and adding new ones. Today I can assure you that my productivity to write R code is much better than it ever was with any other text editor.</p>
       <p>I will not go through the details of which keybindings do what since it is all in the self contained tutorial, however there are some key points to learn the keybindings. One is the knowledge of the so called "Emacs Notation". Whenever you search either in Emacs documentation or some other sources to use Emacs, how to perform certain actions, you will find things like <strong>C-M-a</strong>. The capital <code>C</code> is short for the key Control, while capital <code>M</code> is for meta, which in most computers is Alt and in Mac is usually the key Command. Thus, <strong>C-M-a</strong> would mean that you have to hold the key <b>Control</b>, the key <b>Meta</b> and the key <b>a</b>. Usually the keys Control and Meta are used in combination with other keys and thus, the letters <strong>C</strong> and <strong>M</strong> are used at the beginning of the commands. That would mean that, for example, the combination <strong>C-C</strong> does not mean Control twice, but rather Control plus capital C. Although this rarely happens (I've never used such a combination), it is important to be aware because Emacs recognizes difference between upper and lower case.</p>
       <p></p>
       <div class="article-image-container">
        <a href="https://blog.teoten.com/post/2022/use_emacs_for_r/emacs-minibuffer.png"><img alt="Emacs minibuffer" src="https://blog.teoten.com/post/2022/use_emacs_for_r/emacs-minibuffer.png"></a>
       </div>
       <p></p>
       <p>Another important part to know in Emacs is the minibuffer. By default it is positioned at the bottom of the screen and it is used to communicate commands between Emacs and the user. For example, when you save a file the minibuffer will print something like <code>Wrote /path/to/file.R</code> to signal that the file has been saved.</p>
       <p>The minibuffer is also used to pass commands to Emacs. All the keybindings are bind to a command, although not every command is bind to a key. To pass a command to Emacs you can use the keys <strong>M-x</strong>. As an example you can try to use <strong>M-x</strong> and you will see that the minibuffer has changed and now is ready to receive your input. Type there <code>help-for-help</code> and a new menu will appear, showing you the options for help and the instructions to use it. For example, type <strong>b</strong> to display all keybindings. The command <code>help-for-help</code> is bind to the keys <strong>C-h ?</strong> therefore, if you would type this combination instead you would have the same response.</p>
       <p>Emacs uses intuitive key bindings and thus, the combination <strong>C-h</strong> is designed for <strong>h</strong>elp. For example, the combination <strong>C-h b</strong> will show the help for the <strong>B</strong>indings, <strong>C-h t</strong> help with <strong>T</strong>utorial, <strong>C-h f</strong> help for a <strong>F</strong>unction (you have to type in the function), etc. <strong>C-x</strong> executes high levels functions such as <strong>s</strong>ave file <strong>C-x C-s</strong> or <strong>c</strong>lose Emacs with <strong>C-x C-c</strong>.</p>
       <p>You can take some time to familiarize yourself with some of the keybindings and later you will see how it pays off when writing and executing R code. The best way to get familiar with the main ones is by following the tutorial included in Emacs, you have the Link in the welcome page, in the Help menu or simply type <strong>C-h t</strong>.</p>
       <h3 class="article-header">The configuration file</h3>
       <p>The second part of the power of Emacs is its customization. The first aspect for its customization is the init file, also known as dot Emacs. According to its documentation:</p>
       <blockquote>
        <p>When Emacs is started, it normally tries to load a Lisp program from an initialization file, or init file for short. This file, if it exists, specifies how to initialize Emacs for you. Traditionally, file <code>~/.emacs</code> is used as the init file, although Emacs also looks at <code>~/.emacs.el</code>, <code>~/.emacs.d/init.el</code>, <code>~/.config/emacs/init.el</code>, or other locations. See <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Find-Init.html">How Emacs Finds Your Init File</a>.</p>
       </blockquote>
       <p>This means that you have several options to tell Emacs how to start. If you are not familiar with Unix style, <code>~/</code> is the home directory. That means that you can have your configuration file in your home directory called <code>.emacs</code> or <code>.emacs.el</code>, or you can have it inside a configuration folder <code>~/.emacs.d/</code> or <code>~/.config/emacs/</code> with the name <code>init.el</code> (or some other options, see the link in the quote).</p>
       <p>To keep consistency and facility, we will keep the same approach that we used in the quick guide above and use the file dot emacs.</p>
       <blockquote>
        <p></p>
        <ol>
         <li>Open Emacs and press the keys Ctr + x, release and press Ctr + f (in Emacs notation, this combination of keys is expressed as "<strong>C-x C-f</strong>"). Focus on the <strong>mini buffer</strong>, it is the line positioned at the bottom of your window. It is waiting for you to type something. If there is some path to a folder already in that area delete it first and then type <code>~/.emacs</code> and enter. It should open a new empty window.</li>
        </ol>
        <p></p>
       </blockquote>
       <p>If you followed step 2 from within Emacs you should have now an empty screen where you can start typing Elisp code to tell Emacs how to start. After a new installation the file still does not exists (although you might already have created it if you followed the quick start). With the command <strong>C-x C-f</strong> we can create it. Make sure that it is stored in the home folder <code>~/</code> and not somewhere else. To demonstrate the point, type the following line anywhere in your <code>.emacs</code> file: <code>(setq inhibit-startup-screen t)</code>, that tells Emacs to inhibit the startup screen. Now save it with <strong>C-x C-s</strong>, close Emacs and open it again and now the startup screen showing you the tutorial should not be there anymore. If you still want to see the welcome screen at startup you can simply delete that line and the startup screen will be back (<strong>C-x C-f</strong> type <code>~/.emacs</code>, delete the line and save).</p>
       <p>Here are just a couple of lines that are useful to add to your dot Emacs file for writing R code:</p>
       <pre><code class="highlight"><span></span><span class="c1">;; enable column numbers</span>
<span class="p">(</span><span class="k">setq</span> <span class="nv">column-number-mode</span> <span class="no">t</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">'prog-mode-hook</span> <span class="ss">'display-line-numbers-mode</span><span class="p">)</span>

<span class="c1">;; Highlights the matching parentheses</span>
<span class="p">(</span><span class="nv">show-paren-mode</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1">;; Using arrow for moving through buffers</span>
<span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">"C-x &lt;up&gt;"</span><span class="p">)</span> <span class="ss">'windmove-up</span><span class="p">)</span>
<span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">"C-x &lt;down&gt;"</span><span class="p">)</span> <span class="ss">'windmove-down</span><span class="p">)</span>
<span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">"C-x &lt;left&gt;"</span><span class="p">)</span> <span class="ss">'windmove-left</span><span class="p">)</span>
<span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">"C-x &lt;right&gt;"</span><span class="p">)</span> <span class="ss">'windmove-right</span><span class="p">)</span>

<span class="c1">;; Starting file</span>
<span class="p">(</span><span class="k">setq</span> <span class="nv">initial-buffer-choice</span>
      <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
	<span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nf">buffer-file-name</span><span class="p">)</span>
	    <span class="p">(</span><span class="nf">current-buffer</span><span class="p">)</span>
	  <span class="p">(</span><span class="nv">find-file</span> <span class="s">"~/Path/to_your_file/a_starting_file.R"</span><span class="p">))))</span>
</code></pre>
       <p>The first part will simply enable column numbers when writing code, for some reason Emacs does not do it by default. Next we are activating the <code>show-paren-mode</code> which highlights the matching parentheses, a useful function when writing long functions. The third paragraph will allow you to move between buffers using <strong>C-x</strong> and the arrows. For example, you can split buffer horizontally using <strong>C-x 2</strong> and then move to the lower buffer using <strong>C-x</strong> and down arrow, or back to the upper with the upper arrow <strong>C-x <up></up></strong>. The last part can set a custom starting file, meaning each time you open Emacs this will be the file that will open by default, but if you open a different file using Emacs this starting file won't show up.</p>
       <h3 class="article-header">Extending Emacs: packages</h3>
       <p>Emacs can be fully customized in the sense that you can write Elisp code to get Emacs do what you want. Luckily, you don't need to know Elisp to take advantage of it. Like in R, there are several packages that extend the basic Emacs to do more than it was originally designed to. In the quick start section steps 3 to 7 we did exactly that in 2 different ways. Let's take a look at each option and detail to install packages.</p>
       <h4 class="article-header">ELPA and MELPA</h4>
       <blockquote>
        <p>ELPA is the Emacs Lisp Package Archive, written originally by <a href="https://www.emacswiki.org/emacs/TomTromey">TomTromey</a>. It is included in <a href="https://www.emacswiki.org/emacs/GnuEmacs">GnuEmacs</a>, starting with version 24. <code>package.el</code> is the package manager library for ELPA.</p>
        <p>“Our goal is to make it simple to install, use, and upgrade Emacs Lisp packages. We supply <code>package.el</code> a simple package manager for Emacs, and a repository of pre-packed Emacs Lisp code.”</p>
        <p>See <a href="https://www.emacswiki.org/emacs/InstallingPackages#installing-packages">InstallingPackages</a> for basic usage information.</p>
       </blockquote>
       <p>To see the ELPA packages available you can execute the command <code>list-packages</code> (remember, by using <strong>M-x</strong>). However, sometimes this are not the most up to date versions, or some packages are simply not listed in the ELPA repositories but rather in MELPA only.</p>
       <blockquote>
        <p><a href="https://melpa.org/">MELPA</a> is an <a href="https://www.emacswiki.org/emacs/ELPA">ELPA</a>-compatible package repository that contains an enormous number of useful Emacs packages.</p>
        <p>In contrast to ELPA, Emacs is not configured by default to install packages from MELPA. You will have to configure Emacs to use it.</p>
       </blockquote>
       <p>You can think of MELPA to ELPA like Bioconductor is to CRAN. In their own words, this is what MELPA is intended for:</p>
       <blockquote>
        <p>Up-to-date packages built on our servers from upstream source</p>
        <p>Installable in any Emacs with 'package.el' - no local version-control tools needed</p>
        <p>Curated - no obsolete, renamed, forked or randomly hacked packages</p>
        <p>Comprehensive - more packages than any other archive</p>
        <p>Automatic updates - new commits result in new packages</p>
        <p>Extensible - contribute new recipes, and we'll build the packages</p>
       </blockquote>
       <p>To configure Emacs to find MELPA packages we simply need two lines of code in our configuration file.</p>
       <pre><code class="highlight"><span></span><span class="p">(</span><span class="nb">require</span> <span class="ss">'package</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">'package-archives</span> <span class="o">'</span><span class="p">(</span><span class="s">"melpa"</span> <span class="o">.</span> <span class="s">"https://melpa.org/packages/"</span><span class="p">))</span>
</code></pre>
       <p>Add those lines to your dot emacs file, save it and restart Emacs to take effect. Now, upon calling <code>list-packages</code> you should see an extended list of packages, some of which are tagged as "melpa" in the section "Archive" of the list.</p>
       <h4 class="article-header">list-packages and install-package</h4>
       <p>From the last section you already know how to call <code>list-packages</code> and if you followed the quick start, you also know how to use the command <code>install-package</code>. Basically, to install a package you could call the command <code>install-package</code>, RET and type the exact name of the package, which can be found in the list of the packages.</p>
       <p>But there is more. According to the <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Package-Menu.html">Emacs Documentation</a>:</p>
       <blockquote>
        <p>The command M-x list-packages brings up the package menu. This is a buffer listing all the packages that Emacs knows about, one on each line, with the following information:</p>
        <p>The package name (e.g., ‘auctex’). The package’s version number (e.g., ‘11.86’). The package’s status—normally one of ‘available’ (can be downloaded from the package archive), ‘installed’, or ‘built-in’ (included in Emacs by default). See Package Statuses. Which package archive this package is from, if you have more than one package archive enabled. A short description of the package.<br></p>
       </blockquote>
       <p>Each area in Emacs is called a buffer and depending what the buffer is running it will be controlled by its own rules. As you saw in the quick start, we can send a line of R code to the terminal by typing <strong>C-c C-j</strong>, but such key combination won't work the same if we are not inside an R file. In the same way, the buffer listing the packages has its own keybindings. You can find all the details in the link above, but here are the most useful ones:</p>
       <ul>
        <li>Move along the buffer using the arrow keys. Move one page down using <strong>C-v</strong> and one page up with <strong>M-v</strong>.</li>
        <li>Search for text using <strong>C-s</strong>.</li>
        <li>Press <strong>i</strong> to mark a package for installation.</li>
        <li>Press <strong>u</strong> to unmark a package.</li>
        <li>Press <strong>x</strong> to execute marked actions.</li>
        <li>Or simply use the menu "Package"</li>
       </ul>
       <p>To exit you can type <strong>q</strong> or you can kill this or any buffer by typing <strong>C-x k</strong> and then <strong>RET</strong>.</p>
       <h4 class="article-header">use-package</h4>
       <p>Another way to install packages is by using the package <a href="https://jwiegley.github.io/use-package/">use-package</a> which in short is a package manager.</p>
       <blockquote>
        <p>The <code>use-package</code> macro allows you to isolate package configuration in your <code>.emacs</code> file in a way that is both performance-oriented and, well, tidy. I created it because I have over 80 packages that I use in Emacs, and things were getting difficult to manage. Yet with this utility my total load time is around 2 seconds, with no loss of functionality!</p>
       </blockquote>
       <p>Let's use the example from the quick start, step 3:</p>
       <pre><code class="highlight"><span></span><span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nv">package-installed-p</span> <span class="ss">'use-package</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">package-refresh-contents</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">package-install</span> <span class="ss">'use-package</span><span class="p">))</span>

<span class="p">(</span><span class="k">setq</span> <span class="nv">use-package-always-ensure</span> <span class="no">t</span><span class="p">)</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">ess</span><span class="p">)</span>
</code></pre>
       <ul>
        <li>The first part makes sure that the package <code>use-package</code> is installed and to refresh the list of packages based on <code>use-package</code> own rules.</li>
        <li>The second part ensures that the package will be installed if it was not yet installed. In other words, it makes the installation of the packages automatic so, you don't have to use <code>install-package</code> command of the <code>list-packages</code> menu.</li>
        <li>Finally <code>(use-package ess)</code> loads the package <code>ess</code> to Emacs, which is the package responsible for running R.</li>
       </ul>
       <h4 class="article-header">Final remarks about Emacs configuration</h4>
       <p>The detail usage of <code>use-package</code> is quite complex, especially for a new Emacs user and it is not covered in this post. Likewise, a more detailed configuration of the init file (<code>.emacs</code>) and the customization of Emacs and the packages through it can take an entire manual. If you are really interested you can start by following the links provided so far. Otherwise I would recommend staying with the basis presented here, getting familiar with Emacs and slowly getting deeper into particular topics. The info presented here is just the very basics to get started with a simple yet powerful IDE for R.</p>
       <p>One important point to know though is that usually, after installing a package, it has to be loaded through the init file so that Emacs can use it. Usually you can find detailed info in the documentation and/or website of the particular package on how to load it and how to configure it. The general rule is to load it using the base Emacs function <code>require</code> (i.e., <code>(require 'ess)</code>) or alternatively with <code>use-package</code> (i.e., <code>(use-package ess)</code>).</p>
       <h2 class="article-header">ESS to speak with R</h2>
       <p>As it was already mentioned, <a href="https://ess.r-project.org/">ESS</a> is the Emacs package used for R code. It stands for "Emacs Speaks Statistics" and it can run not only R code but other statistical analysis programs including Julia.</p>
       <blockquote>
        <p>Emacs Speaks Statistics (ESS) is an add-on package for GNU Emacs. It is designed to support editing of scripts and interaction with various statistical analysis programs such as R, S-Plus, SAS, Stata and OpenBUGS/JAGS. Although all users of these statistical analysis programs are welcome to apply ESS, advanced users or professionals who regularly work with text-based statistical analysis scripts, with various statistical languages/programs, or with different operating systems might benefit from it the most.</p>
        <p>The rationale for developing ESS is that most statistical analysis systems provide a more or less sophisticated graphical user interface (GUI). However, their full power is only available using their scripting language. Furthermore, complex statistical analysis projects require a high degree of automation and documentation which can only be handled by creating statistical analysis scripts. Unfortunately, many statistics packages provide only weak text editor functionality and show major differences between them. Without a unified text editor user interface additional effort is required from the user to cope with limited functionality and with text editor differences.<br></p>
       </blockquote>
       <p>ESS is a very powerful and specialized software on its own, its <a href="https://ess.r-project.org/Manual/ess.html">documentation</a> includes 16 detailed topics for its usage. Its use with Emacs can be compared to R Studio alone, although there are significant differences, the ESS team have also work a lot lately on having enough similarities to make R Studio users feel comfortable switching to Emacs.</p>
       <p>I use it particularly for R, it helps me to write R code including syntax highlight and indentation, to send R code to the console, to debug R code and more.</p>
       <h3 class="article-header">How to use R in ESS</h3>
       <p>As we already mentioned, Emacs can be fully configured to our needs and wishes. If you clicked in the links above, you can also see that ESS documentation is quite long and complex. The present post is merely an introduction to its possibilities. Here is a table with the most commonly used key bindings and commands used in ESS.</p>
       <table>
        <thead>
         <tr>
          <th style="text-align:center">Keys</th>
          <th style="text-align:center">Effect</th>
         </tr>
        </thead>
        <tbody>
         <tr>
          <td style="text-align:center">C-RET</td>
          <td style="text-align:center">Sends region, line or step to the console</td>
         </tr>
         <tr>
          <td style="text-align:center">C-c C-j</td>
          <td style="text-align:center">Sends line to the console</td>
         </tr>
         <tr>
          <td style="text-align:center">C-c C-p</td>
          <td style="text-align:center">Sends paragraph to the console</td>
         </tr>
         <tr>
          <td style="text-align:center">C-c C-b</td>
          <td style="text-align:center">Sends buffer (whole file) to the console</td>
         </tr>
         <tr>
          <td style="text-align:center">C-c C-f</td>
          <td style="text-align:center">Sends buffer to the console</td>
         </tr>
         <tr>
          <td style="text-align:center">M-x ess-indent-exp</td>
          <td style="text-align:center">Indents expression</td>
         </tr>
        </tbody>
       </table>
       <p>To use them make sure to have installed and loaded ESS in your Emacs. Then you can simply create an R file, start typing code and run it.</p>
       <p>You can also use the menu "ESS" fro within the R buffer to explore more keybindings and commands. One useful section is the "Font Lock" which defines the Syntax Highlighting for R. I'd recommend to have open a relatively long or complex R script and mark/unmark fields to see what happens. But basically, the fields marked in the menu "Font Lock" are the fields that will be highlighted by Emacs.</p>
       <p>The ESS debugging tool is also useful and powerful. You can simply type in you R console <code>debug(function)</code> and then run the function called inside <code>debug</code> or a function containing it and Emacs will run step by step and side by side the file each time you type RET in the console. Whenever you don't type RET you can do all sort of stuff locally such as print the state of an argument or even change its value.</p>
       <h3 class="article-header">Company</h3>
       <p>Among all the libraries and Emacs functionalities that can help us writing R code, I think that <a href="https://company-mode.github.io/">Company</a> deserves a special mention. It is an auto completion tool that is easy to set up for ESS and intuitive to use. If you followed the quick start you should already have it installed and ready to use.</p>
       <pre><code class="highlight"><span></span><span class="p">(</span><span class="nb">use-package</span> <span class="nv">company</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">'after-init-hook</span> <span class="ss">'global-company-mode</span><span class="p">))</span>

<span class="p">(</span><span class="k">setq</span> <span class="nv">company-selection-wrap-around</span> <span class="no">t</span>
      <span class="nv">company-tooltip-align-annotations</span> <span class="no">t</span>
      <span class="nv">company-idle-delay</span> <span class="mf">0.45</span>
      <span class="nv">company-minimum-prefix-length</span> <span class="mi">3</span>
      <span class="nv">company-tooltip-limit</span> <span class="mi">10</span><span class="p">)</span>
</code></pre>
       <p>The first paragraph is calling the library and creating a hook to activate it globally. You could as well change the hook to have it active only when ESS is running, but in my experience it is quite useful to have it active globally.</p>
       <p>The second paragraph customize some of its functionality, for example <code>company-idle-delay</code> defines the delay time to show the autocomplete menu, in seconds. You can fin more info about it in the official <a href="https://company-mode.github.io/manual/Getting-Started.html">documentation</a> or simply by typing <strong>C-h v</strong> RET and the name of the variable (i.e., <strong>C-h v RET company-idle-delay</strong>).</p>
       <p></p>
       <div class="article-image-container">
        <a href="https://blog.teoten.com/post/2022/use_emacs_for_r/company.png"><img alt="Company in action" src="https://blog.teoten.com/post/2022/use_emacs_for_r/company.png"></a>
       </div>
       <p></p>
       <p>If you followed the quick start you could probably had already noticed that you get code suggestions while typing R code. If not, I recommend you to give it a try. The variable <code>company-minimum-prefix-length</code> is set to 3, which means that you need to type at least 3 characters and wait 0.45 seconds for the menu to pop-up.</p>
       <h2 class="article-header">What next? - Explore Emacs and its libraries</h2>
       <p>As mentioned before, Emacs has many functionalities that can help boosting your productivity and writing code more easily. Here are some I personally use:</p>
       <table>
        <thead>
         <tr>
          <th style="text-align:left">Emacs Functionalities</th>
          <th style="text-align:left">Purpose</th>
         </tr>
        </thead>
        <tbody>
         <tr>
          <td style="text-align:left"><a href="https://orgmode.org/">org-mode</a></td>
          <td style="text-align:left">Organization functionality in Emacs using plain text</td>
         </tr>
         <tr>
          <td style="text-align:left"><a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Parentheses.html">paren-mode</a></td>
          <td style="text-align:left">Commands for editing with parentheses</td>
         </tr>
         <tr>
          <td style="text-align:left"><a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Version-Control.html">vc-mode</a></td>
          <td style="text-align:left">Version Conrol in Emacs</td>
         </tr>
         <tr>
          <td style="text-align:left"><a href="https://elpa.gnu.org/packages/csv-mode.html">csv-mode</a></td>
          <td style="text-align:left">Visualize and edit CSV files</td>
         </tr>
         <tr>
          <td style="text-align:left"><a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Registers.html">bookmarks and registers</a></td>
          <td style="text-align:left">Save position in a file, windows configuration or text in keystrokes</td>
         </tr>
         <tr>
          <td style="text-align:left"></td>
          <td style="text-align:left"></td>
         </tr>
        </tbody>
       </table>
       <p>If you had a look at <code>list-packages</code> you would have noticed that the number of libraries available is huge. Here is a very conservative list of libraries that are particularly useful for working with R, or code in general.</p>
       <table>
        <thead>
         <tr>
          <th style="text-align:left">Package</th>
          <th style="text-align:left">Use</th>
         </tr>
        </thead>
        <tbody>
         <tr>
          <td style="text-align:left"><a href="https://polymode.github.io/">polymode</a></td>
          <td style="text-align:left">Helps for markdown documents</td>
         </tr>
         <tr>
          <td style="text-align:left"><a href="https://github.com/polymode/poly-R">poly-R</a></td>
          <td style="text-align:left">Polymode for R</td>
         </tr>
         <tr>
          <td style="text-align:left"><a href="https://github.com/polymode/poly-markdown">poly-markdown</a></td>
          <td style="text-align:left">Polymode for markdown</td>
         </tr>
         <tr>
          <td style="text-align:left"><a href="https://magit.vc/">Magit</a></td>
          <td style="text-align:left">A more user friendly Version control with great visualizations</td>
         </tr>
         <tr>
          <td style="text-align:left"><a href="https://www.emacswiki.org/emacs/FlySpell">Flyspell</a></td>
          <td style="text-align:left">Syntax check. Uses <code>lintr</code> for R</td>
         </tr>
         <tr>
          <td style="text-align:left"><a href="https://github.com/abo-abo/swiper">Swiper</a></td>
          <td style="text-align:left">The link includes <strong>Ivy</strong> for auto completion, <strong>Counsel</strong> for common Emacs commands and <strong>Swiper</strong> for search</td>
         </tr>
         <tr>
          <td style="text-align:left"><a href="https://github.com/joaotavora/yasnippet">Yasnippet</a></td>
          <td style="text-align:left">Templates system for Emacs</td>
         </tr>
        </tbody>
       </table>
       <p>Emacs is also an excellent tool for different kinds of professional writting, during my PhD studies I was using <a href="https://www.gnu.org/software/auctex/">AUCTeX</a> for writing papers in LaTeX, supported by <a href="https://www.emacswiki.org/emacs/BibTeX">bibtex-mode</a> to organize the bibliography and <a href="https://github.com/tmalsburg/helm-bibtex">helm-bibtex</a> for queries. Emacs can also run <a href="https://www.emacswiki.org/emacs/CategoryWebBrowser">web browsers</a>, <a href="https://www.emacswiki.org/emacs/CategoryGames">games</a> and functionalities for <a href="https://www.emacswiki.org/emacs/CategoryMail">email</a>, among others. I personally don't use these much, but it shows the great possibilities of Emacs.</p>
       <p>If you would like me to cover some of them in more detail leave a comment and I'll try my best to share my knowledge to help.</p>
      </div>
     </article>
     <div class="article-comments">
      <script src="https://utteranc.es/client.js" repo="teotenn/blog.teoten.com" issue-term="pathname" theme="github-light" crossorigin="anonymous" async>
  </script>
     </div>
    </div>
    <button id="toggle-button">&lt;</button>
    <div id="sidebar" class="collapsed">
     <a href="https://blog.teoten.com/about/"> <img src="https://blog.teoten.com/img/tt-avatar.jpg" alt="Teoten" class="sidebar-image"> </a>
     <h2 class="h-sidebar">Links</h2>
     <ul>
      <li><a href="https://www.r-project.org/">The R Project</a></li>
      <li><a href="https://www.r-bloggers.com/">R-bloggers</a></li>
      <li><a href="https://clojure.org/">Clojure</a></li>
      <li><a href="https://www.gnu.org/software/emacs/">GNU Emacs</a></li>
     </ul>
     <h2 class="h-sidebar">Socials</h2>
     <ul class="horizontal-list">
      <li><a href="https://www.linkedin.com/in/teoten/"><i class="fab fa-linkedin-in"></i></a></li>
      <li><a href="https://codeberg.org/teoten"><i class="fab fa-github"></i></a></li>
      <li><a rel="me" href="https://social.linux.pizza/@teoten"><i class="fab fa-mastodon"></i></a></li>
     </ul>
    </div>
   </div>
  </div>
  <script src="/js/9c70eb7a56f7/scripts.js"></script>
 </body>
</html>